{% if navigation %}<ul {% if root %} class="{{navigationCssClass}}" {% endif %} >
    {# warning, don't split for and <li> in 2 lines. It removes spaces between two <li> then we can use display: inline-block;#}
    {% for navigationElem in navigation %}<li class="{%if loop.first%} kit-cms-first {%endif%}{%if loop.last%} kit-cms-last {%endif%}kit-cms-navigation-{{navigationSlug}}-level{{navigationElem.level}} kit-cms-navigation-{{navigationSlug}}-slug-{{navigationElem.slug}} kit-cms-not-select kit-cms-not-current">
            {% if navigationElem.url == '' %}
                <div class="kit-cms-navigation-nolink">
                    {%if loop.first and kitCmsViewMode == 3 %} <div class='kit-cms-nav-button-add kit-cms-nav-button-add-first' data-cms-nav-slug='{{navigationElem.slug}}' data-cms-nav-next-sibling='0' ><img src="/bundles/kitpagescms/icon/add-small.png"></div>{%endif%}
                    {{navigationElem.title}}
                    {%if kitCmsViewMode == 3%}<div class='kit-cms-nav-button-add' data-cms-nav-slug='{{navigationElem.slug}}' data-cms-nav-next-sibling='1' ><img src="/bundles/kitpagescms/icon/add-small.png" ></div>{%endif%}
                </div>
            {% else %}
                <a href="{{navigationElem.url}}" >
                    {%if loop.first and kitCmsViewMode == 3 %} <div class='kit-cms-nav-button-add kit-cms-nav-button-add-first' data-cms-nav-slug='{{navigationElem.slug}}' data-cms-nav-next-sibling='0' ><img src="/bundles/kitpagescms/icon/add-small.png"></div>{%endif%}
                    {{navigationElem.title}}
                    {%if kitCmsViewMode == 3%}<div class='kit-cms-nav-button-add' data-cms-nav-slug='{{navigationElem.slug}}' data-cms-nav-next-sibling='1' ><img src="/bundles/kitpagescms/icon/add-small.png" ></div>{%endif%}
                </a>
            {% endif %}
            {% include 'KitpagesCmsBundle:Nav:navigation.html.twig' with {'navigation': navigationElem.children, 'navigationSlug':navigationSlug, 'root':false } %}
        </li>{% endfor %}
</ul>
{%endif%}
{% if root %}
<script>
(function(){
    {%if kitCmsViewMode == 3%}
    $('.{{navigationCssClass}} .kit-cms-nav-button-add').click(function(event){
        event.preventDefault();
        if($(this).attr('data-cms-nav-next-sibling') == 1) {
            window.location.href = '{{ path('kitpages_cms_page_choice_create', { 'kitpages_target': kitpages_target })}}&next_sibling_slug=' + $(this).attr('data-cms-nav-slug');
        } else {
            window.location.href = '{{ path('kitpages_cms_page_choice_create', { 'kitpages_target': kitpages_target })}}&prev_sibling_slug=' + $(this).attr('data-cms-nav-slug');
        }

    })
    {% endif %}
    {% if currentPageSlug != '' %}
        $('.kit-cms-navigation-{{navigationSlug}}-slug-{{currentPageSlug}}').addClass('kit-cms-select').removeClass("kit-cms-not-select");
        $('.kit-cms-navigation-{{navigationSlug}}-slug-{{currentPageSlug}}').addClass('kit-cms-current').removeClass("kit-cms-not-current");
    {% endif %}
    {% for selectPageSlug in selectPageSlugList %}
        $('.kit-cms-navigation-{{navigationSlug}}-slug-{{selectPageSlug}}').addClass('kit-cms-select').removeClass("kit-cms-not-select");
    {% endfor %}
})();
</script>

{% endif %}
<script>
//
</script>

